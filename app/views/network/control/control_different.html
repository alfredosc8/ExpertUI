<!-- Enter / Leave different Networks -->
<div class="panel panel-default" ng-controller="IncludeDifferentNetworkController">
    <div class="panel-heading"><i class="fa fa-sitemap"></i> {{_t('nm_inc_into_nw')}}</div>
    <div class="panel-body">
        <!-- Not included in network -->
        <div ng-if="controlDh.controller.isRealPrimary && (!controlDh.controller.hasDevices)">
            <p class="input-help">{{_t('device_not_included_info')}}</p>
            <bb-alert alert="controlDh.network.alert"></bb-alert>
            <button class="btn btn-primary" id="btn_learn_start"
                    ng-disabled="[1, 2, 3, 4, 5, 6, 7].indexOf(controlDh.controller.controllerState) > -1 || (controlDh.controller.SUCNodeId == controlDh.controller.nodeId && controlDh.controller.isSIS && controlDh.controller.hasDevices) || controlDh.controller.isInOthersNetwork"
                    ng-show="[9].indexOf(controlDh.controller.controllerState) == -1 && controlDh.network.inclusionProcess !== 'processing'"
                    ng-click="includeToNetwork('controller.SetLearnMode(1)')">
                <i class="fa fa-play-circle"></i> {{_t('include_into_network')}}
            </button>
            <button class="btn btn-danger" id="btn_learn_stop"
                    ng-show="[9].indexOf(controlDh.controller.controllerState) > -1"
                    ng-click="includeToNetwork('controller.SetLearnMode(0)')">
                <i class="fa fa-stop-circle"></i> {{_t('include_into_network_stop')}}
            </button>
        </div>
        <!-- included in network - disabled-->
        <div ng-if="controlDh.controller.isRealPrimary && (controlDh.controller.hasDevices)">
            <p class="input-help">{{_t('device_included_info')}}</p>
            <button class="btn btn-primary" id="btn_learn_start_2" disabled
            >{{_t('leave_network')}}
            </button>
        </div>

        <!-- already included in network - displays exclude from network -->
        <div ng-if="!controlDh.controller.isRealPrimary">
            <p class="input-help">{{_t('device_included_info')}}</p>
            <div ng-hide="controlDh.network.modal && [0].indexOf(controlDh.controller.controllerState) > -1">
                <bb-alert alert="controlDh.network.alert"></bb-alert>
            </div>
            <div>
                <bb-alert alert="controlDh.alert"></bb-alert>
            </div>

            <button class="btn btn-info" id="btn_learn_start"
                    ng-disabled="[1, 2, 3, 4, 5, 6, 7].indexOf(controlDh.controller.controllerState) > -1 || !controlDh.controller.isInOthersNetwork"
                    ng-hide="(controlDh.network.inclusionProcess == 'processing' && !controlDh.network.modal) || [9].indexOf(controlDh.controller.controllerState) > -1"
                    ng-click="includeToNetwork('controller.SetLearnMode(1)',_t('before_leaving_network'))">
                <i class="fa fa-play-circle"></i> {{_t('leave_network')}}
            </button>
            <button class="btn btn-danger" id="btn_learn_stop"
                    ng-show="[9].indexOf(controlDh.controller.controllerState) > -1"
                    ng-click="includeToNetwork('controller.SetLearnMode(0)')">
                <i class="fa fa-stop-circle"></i> {{_t('leave_network_stop')}}
            </button>
        </div>
        <!-- Controller change -->
        <div class="cfg-block-top-border" ng-if="cfg.app_type == 'default'" ng-include="'app/views/network/control/control_network_maintance_ctrlchange.html'"></div>
    </div>

    <!-- successNetworkIncludeModal -->
    <div id="successNetworkIncludeModal" class="appmodal" ng-if="controlDh.network.modal && controlDh.network.inclusionProcess !== 'processing' && (!controlDh.controller.isRealPrimary || controlDh.controller.isInOthersNetwork)">
        <div class="appmodal-in">
            <div class="appmodal-header">
                <span class="appmodal-close" ng-click="closeNetworkModal('successNetworkIncludeModal', $event)" ng-hide="controlDh.process"><i
                        class="fa fa-times"></i></span>
                <h3>{{_t('include_into_network')}}</h3>
            </div>
            <div class="appmodal-body">
                <div class="alert alert-success">
                    <i class="fa fa-smile-o"></i> {{_t('success_controller_include')}}

                </div>
                <div class="cfg-block">
                    <!-- restore -->
                    <button class="btn btn-primary"
                            ng-click="handleModal('restoreModal', $event)" ng-disabled="controlDh.process">
                        <i class="fa fa-repeat"></i> {{_t('make_restore')}}
                    </button>
                </div>
                <div class="cfg-block" ng-controller="RequestNifAllController">
                    <button class="btn btn-primary"
                            id="btn_request_nif"
                            ng-click="requestNifAll('requestNifAll');"
                            ng-disabled="rowSpinner['requestNifAll']">

                        <bb-row-spinner
                                spinner="rowSpinner['requestNifAll']"
                                label="_t('detect_all_nodes')"
                                icon="'fa-search-plus'">
                        </bb-row-spinner>
                    </button>
                </div>
                <div class="cfg-block">
                    <button type="button" class="btn btn-primary" ng-click="closeNetworkModal('successNetworkIncludeModal', $event)" ng-disabled="controlDh.process">
                        <i class="fa fa-arrow-right"></i> <span class="btn-name">{{_t('just_proceed')}}</span>
                    </button>
                </div>

            </div>
            <!-- <div class="appmodal-footer">
                 &lt;!&ndash; Close &ndash;&gt;
                 <button type="button" class="btn btn-default" ng-click="handleModal('successNetworkIncludeModal', $event)">
                     <i class="fa fa-times text-danger"></i> <span class="btn-name">{{_t('btn_cancel')}}</span>
                 </button>
             </div>-->
        </div>
    </div><!-- /#modal successNetworkIncludeModal -->

    <!-- inclusionVerifyDSKModal -->
    <div id="inclusionVerifyDSKModal" class="appmodal" ng-if_="controlDh.inclusion.grantKeys.anyChecked && controlDh.inclusion.verifyDSK.show && cfg.app_type != 'installer'">
        <div class="appmodal-in">
            <form name="dskForm">
                <div class="appmodal-header">
                    <!-- <span class="appmodal-close" ng-click="closeInclusionModal()"><i
                             class="fa fa-times"></i></span>-->
                    <h3>{{_t('verify_device_pin')}}</h3>
                </div>
                <div class="appmodal-body modal-h-600 form-group form-inline" ng-controller="QrCodeController">
                    <p>{{_t('verify_included_pin')}}</p>
                    <div class="alert alert-warning">{{controlDh.inclusion.verifyDSK.countDown}}s remain</div>
                    <!-- name -->
                    <label>{{_t('pin')}}</label>
                    <input name="dsk_pin" id="dsk_pin" type="number" size="5" class="form-control input_number input-valid-{{dskForm.dsk_pin.$valid}}" min="0" max="65533" ng-show="controlDh.inclusion.input.publicKeyAuthenticationRequired"
                           ng-model="controlDh.inclusion.input.dskPin" required />

                    <input name="dsk_1" id="dsk_1" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 1)" disabled="true" ng-show="!controlDh.inclusion.input.publicKeyAuthenticationRequired" />
                    -
                    <input name="dsk_2" id="dsk_2" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 2)" disabled="true" />
                    -
                    <input name="dsk_3" id="dsk_3" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 3)" disabled="true" />
                    -
                    <input name="dsk_4" id="dsk_4" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 4)" disabled="true" />
                    -
                    <input name="dsk_5" id="dsk_5" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 5)" disabled="true" />
                    -
                    <input name="dsk_6" id="dsk_6" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 6)" disabled="true" />
                    -
                    <input name="dsk_7" id="dsk_7" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 7)" disabled="true" />
                    -
                    <input name="dsk_8" id="dsk_8" type="number" size="5" class="form-control input_number" ng-value="dskBlock(controlDh.inclusion.input.publicKey, 8)" disabled="true" />
                    <div class="qrcode-wrap">
                        <div id="qrcode_network"></div>
                    </div>
                </div>
                <div class="appmodal-footer">
                    <!-- Cancel -->
                    <button type="button" class="btn btn-default" ng-click="handleInclusionVerifyDSK(false)">
                        <i class="fa fa-times text-danger"></i> <span class="btn-name">{{_t('btn_cancel')}}</span>
                    </button>
                    <!-- Confirm -->
                    <button type="button" class="btn btn-submit" ng-click="handleInclusionVerifyDSK(true)">
                        <i class="fa fa-check"></i> <span class="btn-name">{{_t('confirm')}}</span>
                    </button>
                </div>
            </form>
        </div>
    </div><!-- /#inclusionVerifyDSKModal -->

</div>

<!-- Backup and Restore -->
<div ng-include="'app/views/network/control/control_restore_modal.html'"></div>